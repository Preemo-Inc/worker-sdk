syntax = "proto3";

package endpoints;

enum ArtifactType {
  ARTIFACT_TYPE_UNSPECIFIED = 0;
  ARTIFACT_TYPE_PARAMS = 1;
  ARTIFACT_TYPE_RESULT = 2;
}

// This config is included for potential future use.
// In the future it may include part count, expiration, or other metadata.
message CreateArtifactConfig {
  optional ArtifactType type = 1;
}

message BatchCreateArtifactRequest {
  // This field is a map instead of an array to avoid depending on the
  // response array being in the same order as the request array.
  map<uint32, CreateArtifactConfig> configs_by_index = 1;
}

message CreateArtifactResult {
  // Required field representing the unique identifier for a file stored in the cloud.
  optional string artifact_id = 1;

  // Required field indicating the precise number of bytes a part should
  // reach before creating the next part.
  optional uint64 part_size_threshold = 2;
}

message BatchCreateArtifactResponse {
  map<uint32, CreateArtifactResult> results_by_index = 1;
}
